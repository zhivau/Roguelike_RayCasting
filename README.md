# Roguelike_RayCasting

Roguelike_RayCasting — это игровое приложение, основанное на классической игре Rogue 1980 года. Проект реализован на Python 3.10, использует библиотеку curses для консольного интерфейса и следует принципам четкого разделения архитектуры на слои.

---

## Установка и запуск

### Требования
- Python версии 3.10 или выше
- Операционная система с поддержкой терминала (Linux, macOS, Windows с windows-curses)

### Установка
1. Склонируйте репозиторий:
   ```bash
   git clone https://github.com/username/Roguelike_RayCasting.git
   ```
2. Перейдите в директорию проекта:
   ```bash
   cd Roguelike_RayCasting
   ```
3. Установите необходимые зависимости:
   ```bash
   pip install -r requirements.txt
   ```

### Запуск
Выполните следующую команду для запуска игры:
```bash
python main.py
```

![Example](images/roguelike.gif)

---

## Архитектура

Проект разделен на три слоя:

1. **Domain (Доменный слой):**
   - Основная логика игры и сущности:
     - Игровая сессия
     - Уровень
     - Комната, коридор
     - Персонаж (здоровье, ловкость, сила, рюкзак)
     - Противники (5 типов с уникальными характеристиками и поведением)
     - Предметы (сокровища, еда, эликсиры, свитки, оружие)

2. **Presentation (Слой отображения):**
   - Реализован с использованием библиотеки curses
   - Отображение:
     - Среды (стены, пол, коридоры)
     - Акторов (персонаж, противники, предметы)
     - Интерфейса (панель статуса, инвентарь, меню)
   - Туман войны: визуализация ограниченной области видимости игрока с использованием Ray Casting и алгоритма Брезенхема

3. **DataLayer (Слой данных):**
   - Сохранение и загрузка данных об игровой сессии и статистике
   - Поддержка таблицы рекордов

---

## Игровой процесс

### Основные механики
- **Уровни:**
  - Всего 21 уровень
  - Каждый уровень состоит из 9 случайно сгенерированных комнат, соединенных коридорами
  - Задача игрока — найти выход на следующий уровень

- **Персонаж:**
  - Управление: WASD для движения, h/j/k/e для использования предметов
  - Инвентарь: до 9 предметов каждого типа
  - Характеристики: здоровье, максимальное здоровье, ловкость, сила

- **Противники:**
  - 5 типов: зомби, вампир, привидение, огр, змей-маг
  - Каждый тип имеет уникальный паттерн поведения и характеристики

- **Предметы:**
  - Сокровища, еда, эликсиры, свитки, оружие
  - Влияние на характеристики персонажа (временное или постоянное)

- **Бой:**
  - Пошаговый режим
  - Удары рассчитываются по очереди с использованием ловкости, силы и оружия
  - Успешная победа над противником приносит сокровища

### Генерация уровней
- Логическая структура:
  - Уровень разделен на 9 секций
  - Связный граф комнат, соединенных коридорами
  - Стартовая и конечная комнаты гарантированы
- Алгоритмы:
  - Генерация комнат случайных размеров и позиций
  - Создание коридоров и проверка связности

---

## Управление
- **Передвижение:** WASD
- **Использование предметов:**
  - h — оружие
  - j — аптечка
  - k — эликсир
  - e — свиток
- Выбор предмета из рюкзака осуществляется вводом числа (1-9)

---

## Таблица рекордов

После завершения игры (успешного или нет) сохраняется статистика:
- Достигнутый уровень
- Количество собранных сокровищ
- Количество побежденных противников
- Статистика использования предметов
- Количество нанесенных и пропущенных ударов

Таблица рекордов сортируется по количеству собранных сокровищ.

# Планы на будущее

## Основные задачи:
   - Завершить текущую работу над проектом и устранить найденные баги.
   - Оптимизировать производительность, особенно в части рендеринга и генерации уровней.

## Дополнительные задачи:

**Двери**
Сгенерировать двери между комнатами и коридорами и ключи к ним. Реализовать систему разноцветных ключей наподобие классической DOOM. При решении задачи необходимо использовать модифицированные алгоритмы поиска в глубину/ширину для проверки доступности ключей и валидности генерации на отсутствие софтлоков.

**Баланс**
Добавить систему автоматической подстройки под уровень игрока. Если игрок легко проходит уровни, необходимо увеличивать сложность. Если игрок сталкивается с трудностями, можно добавлять немного больше полезных для игрока предметов (например, если игрок часто тратит здоровье — предоставлять больше аптечек) и понизить количество и сложность врагов.

**3D**
Добавить режим 3D-рендеринга, в котором:
- Основной вид переключается на 3D-вид от первого лица.
- 2D-вид остается в режиме мини-карты в углу экрана.
- Управление меняется соответствующим образом: W — перед, S — назад, A — поворот налево, D — поворот направо.

Для 3D-рендеринга комнат и коридоров использовать алгоритм Ray Casting и библиотеку curses. Стены комнат и туннелей должны иметь текстуру, чтобы перемещение персонажа было заметным. Пример реализации 3D-рендеринга уровней представлен в папке code-samples.

## Идеи для будущего:
   - Внедрение новых типов врагов и ловушек.
   - Разработка многоуровневой системы сохранений.
   - Добавление сетевого режима для совместной игры.



